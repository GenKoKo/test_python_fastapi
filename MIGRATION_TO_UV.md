# ğŸš€ é·ç§»åˆ° uv åŒ…ç®¡ç†å™¨

## ğŸ“‹ é·ç§»æ¦‚è¿°

æœ¬å°ˆæ¡ˆå·²å¾å‚³çµ±çš„ `pip + requirements.txt` é·ç§»åˆ°ç¾ä»£çš„ `uv` åŒ…ç®¡ç†å™¨ã€‚

## âœ… å·²å®Œæˆçš„é·ç§»æ­¥é©Ÿ

### 1. ä¾è³´ç®¡ç†é·ç§»

-   âœ… æ›´æ–° `pyproject.toml` é…ç½®
-   âœ… ç”Ÿæˆ `uv.lock` é–å®šæ–‡ä»¶
-   âœ… æ·»åŠ æ‰€æœ‰å¿…è¦çš„é–‹ç™¼ä¾è³´
-   âœ… æ¸…ç†èˆŠçš„ `fastapi_env` è™›æ“¬ç’°å¢ƒ

### 2. å·¥å…·é…ç½®æ›´æ–°

-   âœ… æ›´æ–° `justfile` ä½¿ç”¨ `uv run` å‘½ä»¤
-   âœ… æ›´æ–°æ‰€æœ‰é–‹ç™¼å‘½ä»¤ï¼ˆtest, format, lint ç­‰ï¼‰
-   âœ… æ›´æ–° CI/CD é…ç½®ä½¿ç”¨ uv
-   âœ… æ›´æ–° GitHub Codespaces é…ç½®

### 3. ç’°å¢ƒæ¸…ç†

-   âœ… ç§»é™¤èˆŠçš„ `fastapi_env/` ç›®éŒ„
-   âœ… ä¿ç•™ `requirements/` ç›®éŒ„ä½œç‚ºåƒè€ƒï¼ˆå¯é¸æ“‡åˆªé™¤ï¼‰

## ğŸ”§ æ–°çš„é–‹ç™¼å·¥ä½œæµç¨‹

### ç’°å¢ƒè¨­ç½®

```bash
# å®‰è£ uvï¼ˆå¦‚æœå°šæœªå®‰è£ï¼‰
curl -LsSf https://astral.sh/uv/install.sh | sh

# è¨­ç½®é–‹ç™¼ç’°å¢ƒ
just setup
# æˆ–ç›´æ¥ä½¿ç”¨ uv
uv sync --dev
```

### æ—¥å¸¸é–‹ç™¼å‘½ä»¤

```bash
# å•Ÿå‹•é–‹ç™¼æœå‹™å™¨
just dev
# æˆ–
uv run uvicorn src.app.main:app --reload

# é‹è¡Œæ¸¬è©¦
just test-unit
# æˆ–
uv run pytest tests/ -v

# æ ¼å¼åŒ–ä»£ç¢¼
just format
# æˆ–
uv run black .

# å®‰è£æ–°ä¾è³´
just install requests
# æˆ–
uv add requests

# å®‰è£é–‹ç™¼ä¾è³´
just install-dev pytest-mock
# æˆ–
uv add --dev pytest-mock
```

## ğŸ“Š é·ç§»å„ªå‹¢

### ğŸš€ æ€§èƒ½æå‡

-   **10-100x æ›´å¿«**çš„ä¾è³´è§£æå’Œå®‰è£
-   **æ›´å¿«çš„è™›æ“¬ç’°å¢ƒå‰µå»º**
-   **ä¸¦è¡Œä¸‹è¼‰å’Œå®‰è£**

### ğŸ”’ æ›´å¥½çš„ä¾è³´ç®¡ç†

-   **ç²¾ç¢ºçš„ä¾è³´é–å®š** (`uv.lock`)
-   **æ›´å¥½çš„ä¾è³´è¡çªè§£æ±º**
-   **çµ±ä¸€çš„å·¥å…·éˆ**

### ğŸ› ï¸ é–‹ç™¼é«”é©—æ”¹å–„

-   **å–®ä¸€å·¥å…·**ç®¡ç†æ‰€æœ‰ Python éœ€æ±‚
-   **èˆ‡ pyproject.toml å®Œç¾æ•´åˆ**
-   **ç¾ä»£åŒ–çš„å‘½ä»¤è¡Œç•Œé¢**

## ğŸ”„ å‘å¾Œå…¼å®¹æ€§

### ä¿ç•™çš„æ–‡ä»¶

-   `requirements/` ç›®éŒ„ï¼ˆä½œç‚ºåƒè€ƒï¼Œå¯é¸æ“‡ä¿ç•™ï¼‰
-   æ‰€æœ‰ç¾æœ‰çš„ `just` å‘½ä»¤ä»ç„¶å¯ç”¨
-   CI/CD æµç¨‹ä¿æŒä¸è®Š

### ç’°å¢ƒè®Šæ•¸

èˆŠçš„ `VIRTUAL_ENV` ç’°å¢ƒè®Šæ•¸å¯èƒ½æœƒé¡¯ç¤ºè­¦å‘Šï¼Œé€™æ˜¯æ­£å¸¸çš„ã€‚uv æœƒè‡ªå‹•ç®¡ç†è™›æ“¬ç’°å¢ƒã€‚

## ğŸš¨ æ³¨æ„äº‹é …

### 1. ç’°å¢ƒè®Šæ•¸è­¦å‘Š

ä½ å¯èƒ½æœƒçœ‹åˆ°é€™æ¨£çš„è­¦å‘Šï¼š

```
warning: `VIRTUAL_ENV=fastapi_env` does not match the project environment path `.venv` and will be ignored
```

é€™æ˜¯æ­£å¸¸çš„ï¼Œuv æœƒä½¿ç”¨ `.venv` ä½œç‚ºæ–°çš„è™›æ“¬ç’°å¢ƒè·¯å¾‘ã€‚

### 2. IDE é…ç½®

å¦‚æœä½ çš„ IDE é‚„æŒ‡å‘èˆŠçš„ `fastapi_env`ï¼Œè«‹æ›´æ–°ç‚º `.venv`ï¼š

-   **VS Code**: æ›´æ–° Python è§£é‡‹å™¨è·¯å¾‘
-   **PyCharm**: æ›´æ–°é …ç›®è§£é‡‹å™¨è¨­ç½®

### 3. æ¸…ç†èˆŠç’°å¢ƒè®Šæ•¸

å¦‚æœéœ€è¦ï¼Œå¯ä»¥æ¸…ç†èˆŠçš„ç’°å¢ƒè®Šæ•¸ï¼š

```bash
unset VIRTUAL_ENV
```

## ğŸ”§ æ•…éšœæ’é™¤

### å•é¡Œï¼šuv å‘½ä»¤æœªæ‰¾åˆ°

```bash
# å®‰è£ uv
curl -LsSf https://astral.sh/uv/install.sh | sh
source ~/.bashrc  # æˆ– ~/.zshrc
```

### å•é¡Œï¼šä¾è³´è¡çª

```bash
# é‡æ–°åŒæ­¥ä¾è³´
uv sync --dev
```

### å•é¡Œï¼šèˆŠç’°å¢ƒå¹²æ“¾

```bash
# æ¸…ç†ä¸¦é‡æ–°è¨­ç½®
just clean
just setup
```

## ğŸ“š æ›´å¤šè³‡æº

-   [uv å®˜æ–¹æ–‡æª”](https://docs.astral.sh/uv/)
-   [uv GitHub å€‰åº«](https://github.com/astral-sh/uv)
-   [Python åŒ…ç®¡ç†æœ€ä½³å¯¦è¸](https://packaging.python.org/)

## ğŸ¯ ä¸‹ä¸€æ­¥

1. **æ¸¬è©¦æ–°ç’°å¢ƒ**ï¼šé‹è¡Œ `just test-unit` ç¢ºä¿ä¸€åˆ‡æ­£å¸¸
2. **æ›´æ–° IDE è¨­ç½®**ï¼šæŒ‡å‘æ–°çš„ `.venv` ç’°å¢ƒ
3. **æ¸…ç†èˆŠæ–‡ä»¶**ï¼šå¯é¸æ“‡åˆªé™¤ `requirements/` ç›®éŒ„
4. **åœ˜éšŠåŒæ­¥**ï¼šç¢ºä¿åœ˜éšŠæˆå“¡éƒ½å®‰è£äº† uv

---

**é·ç§»å®Œæˆï¼** ğŸ‰ ç¾åœ¨ä½ å¯ä»¥äº«å—æ›´å¿«ã€æ›´ç¾ä»£çš„ Python é–‹ç™¼é«”é©—äº†ã€‚
