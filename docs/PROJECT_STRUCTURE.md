# ğŸ“ FastAPI é …ç›®çµæ§‹èªªæ˜

## ğŸ¯ ç•¶å‰é …ç›®çµæ§‹

```
fastapi_project/
â”œâ”€â”€ .github/                    # GitHub é…ç½®
â”‚   â”œâ”€â”€ workflows/
â”‚   â”‚   â”œâ”€â”€ ci.yml             # ä¸»è¦ CI/CD æµç¨‹
â”‚   â”‚   â””â”€â”€ feature-ci.yml     # åŠŸèƒ½åˆ†æ”¯ CI
â”œâ”€â”€ .devcontainer/             # GitHub Codespaces é…ç½®
â”œâ”€â”€ .kiro/                     # Kiro IDE é…ç½®
â”‚   â”œâ”€â”€ steering/              # é–‹ç™¼æŒ‡å°è¦å‰‡
â”‚   â””â”€â”€ specs/                 # è¦æ ¼æ–‡ä»¶
â”œâ”€â”€ src/                       # æºä»£ç¢¼ç›®éŒ„
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ core/                  # æ ¸å¿ƒé…ç½®å’Œå·¥å…·
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ config.py          # é…ç½®ç®¡ç†
â”‚   â”‚   â””â”€â”€ logger.py          # æ—¥èªŒç³»çµ±
â”‚   â””â”€â”€ app/                   # ä¸»æ‡‰ç”¨
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ main.py            # FastAPI æ‡‰ç”¨å…¥å£
â”‚       â”œâ”€â”€ models/            # æ•¸æ“šæ¨¡å‹
â”‚       â”œâ”€â”€ routers/           # API è·¯ç”±
â”‚       â”œâ”€â”€ services/          # æ¥­å‹™é‚è¼¯
â”‚       â”œâ”€â”€ database/          # æ•¸æ“šåº«å±¤
â”‚       â””â”€â”€ utils/             # å·¥å…·å‡½æ•¸
â”œâ”€â”€ tests/                     # æ¸¬è©¦æ–‡ä»¶
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ conftest.py
â”‚   â”œâ”€â”€ test_items.py
â”‚   â””â”€â”€ test_users.py
â”œâ”€â”€ scripts/                   # é–‹ç™¼è…³æœ¬ï¼ˆåŸ tools/ï¼‰
â”‚   â”œâ”€â”€ test_config.py         # é…ç½®æ¸¬è©¦
â”‚   â”œâ”€â”€ test_api.py            # API æ¸¬è©¦
â”‚   â”œâ”€â”€ test_venv.py           # ç’°å¢ƒæ¸¬è©¦
â”‚   â””â”€â”€ test_*.py              # å…¶ä»–æ¸¬è©¦å·¥å…·
â”œâ”€â”€ docker/                    # Docker é…ç½®
â”‚   â”œâ”€â”€ docker-compose.yml     # ä¸»è¦é…ç½®
â”‚   â”œâ”€â”€ docker-compose.override.yml # é–‹ç™¼ç’°å¢ƒ
â”‚   â””â”€â”€ docker-compose.prod.yml # ç”Ÿç”¢ç’°å¢ƒ
â”œâ”€â”€ docs/                      # æ–‡æª”ç›®éŒ„
â”œâ”€â”€ requirements/              # åˆ†å±¤ä¾è³´ç®¡ç†
â”‚   â”œâ”€â”€ base.txt              # åŸºç¤ä¾è³´
â”‚   â”œâ”€â”€ dev.txt               # é–‹ç™¼ä¾è³´
â”‚   â””â”€â”€ prod.txt              # ç”Ÿç”¢ä¾è³´
â”œâ”€â”€ run.py                     # æ‡‰ç”¨å•Ÿå‹•å™¨
â”œâ”€â”€ pyproject.toml            # ç¾ä»£ Python é …ç›®é…ç½®
â”œâ”€â”€ justfile                  # Just å‘½ä»¤å®šç¾©
â”œâ”€â”€ Dockerfile                # Docker é¡åƒå®šç¾©
â”œâ”€â”€ .dockerignore            # Docker å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ .env.example             # ç’°å¢ƒè®Šé‡ç¯„æœ¬
â”œâ”€â”€ .gitignore               # Git å¿½ç•¥æ–‡ä»¶
â””â”€â”€ README.md                # é …ç›®èªªæ˜
```

## ğŸ—ï¸ ç›®éŒ„èªªæ˜

### `src/` - æºä»£ç¢¼ç›®éŒ„

æ‰€æœ‰çš„æ‡‰ç”¨æºä»£ç¢¼éƒ½æ”¾åœ¨é€™å€‹ç›®éŒ„ä¸‹ï¼Œä¾¿æ–¼ç®¡ç†å’Œéƒ¨ç½²ã€‚

#### `src/core/` - æ ¸å¿ƒæ¨¡çµ„

-   **config.py**: ç’°å¢ƒè®Šé‡é…ç½®ç®¡ç†
-   **logger.py**: çµ±ä¸€çš„æ—¥èªŒè¨˜éŒ„ç³»çµ±

#### `src/app/` - ä¸»æ‡‰ç”¨

-   **main.py**: FastAPI æ‡‰ç”¨å…¥å£å’Œé…ç½®
-   **models/**: Pydantic æ•¸æ“šæ¨¡å‹å®šç¾©
-   **routers/**: API è·¯ç”±è™•ç†
-   **services/**: æ¥­å‹™é‚è¼¯å¯¦ç¾
-   **database/**: æ•¸æ“šåº«æ“ä½œæŠ½è±¡
-   **utils/**: é€šç”¨å·¥å…·å‡½æ•¸å’Œä¸­é–“ä»¶

### `tests/` - æ¸¬è©¦ç›®éŒ„

åŒ…å«æ‰€æœ‰çš„å–®å…ƒæ¸¬è©¦å’Œé›†æˆæ¸¬è©¦ã€‚

### `scripts/` - é–‹ç™¼è…³æœ¬

åŒ…å«å„ç¨®é–‹ç™¼å’Œæ¸¬è©¦å·¥å…·è…³æœ¬ï¼ˆåŸ tools/ ç›®éŒ„ï¼‰ã€‚

### `docker/` - Docker é…ç½®

åŒ…å«æ‰€æœ‰ Docker ç›¸é—œçš„é…ç½®æ–‡ä»¶ã€‚

### `requirements/` - åˆ†å±¤ä¾è³´ç®¡ç†

-   **base.txt**: æ ¸å¿ƒä¾è³´
-   **dev.txt**: é–‹ç™¼å·¥å…·ä¾è³´
-   **prod.txt**: ç”Ÿç”¢ç’°å¢ƒä¾è³´

### `docs/` - æ–‡æª”ç›®éŒ„

åŒ…å«é …ç›®ç›¸é—œçš„æ‰€æœ‰æ–‡æª”ã€‚

## ğŸ¯ æ•´ç†çš„å„ªå‹¢

### 1. æ¸…æ™°çš„åˆ†å±¤çµæ§‹

-   **æºä»£ç¢¼é›†ä¸­**: æ‰€æœ‰æºä»£ç¢¼åœ¨ `src/` ç›®éŒ„ä¸‹
-   **åŠŸèƒ½åˆ†é›¢**: æ ¸å¿ƒé…ç½®ã€æ‡‰ç”¨é‚è¼¯ã€æ¸¬è©¦ã€å·¥å…·åˆ†åˆ¥ç®¡ç†
-   **æ–‡æª”é›†ä¸­**: æ‰€æœ‰æ–‡æª”åœ¨ `docs/` ç›®éŒ„ä¸‹

### 2. ç¾ä»£åŒ–é…ç½®

-   **pyproject.toml**: ç¾ä»£ Python é …ç›®é…ç½®
-   **åˆ†å±¤ä¾è³´**: é–‹ç™¼/ç”Ÿç”¢ç’°å¢ƒåˆ†é›¢
-   **å·¥å…·é…ç½®çµ±ä¸€**: Blackã€pytestã€mypy ç­‰é…ç½®é›†ä¸­

### 3. ä¼æ¥­ç´šæ¨™æº–

-   **ç¬¦åˆ Python åŒ…çµæ§‹æ¨™æº–**
-   **ç„¡ç¬¦è™Ÿé€£çµ**: è·¨å¹³å°å…¼å®¹
-   **ä¾¿æ–¼ CI/CD é›†æˆ**
-   **æ”¯æŒå®¹å™¨åŒ–éƒ¨ç½²**

## ğŸš€ ä½¿ç”¨æ–¹å¼

### å•Ÿå‹•æ‡‰ç”¨

```bash
python run.py
```

### é‹è¡Œæ¸¬è©¦

```bash
# å–®å…ƒæ¸¬è©¦
python -m pytest tests/ -v

# å·¥å…·æ¸¬è©¦
python tools/test_new_structure.py
```

### ä½¿ç”¨ Just å‘½ä»¤

```bash
# è¨­ç½®ç’°å¢ƒ
just setup

# é–‹ç™¼æ¨¡å¼é‹è¡Œ
just dev

# é‹è¡Œæ¸¬è©¦
just test-unit

# Docker é–‹ç™¼
just docker-dev
```

### é–‹ç™¼å·¥å…·

```bash
# é…ç½®æ¸¬è©¦
python scripts/test_config.py

# API æ¸¬è©¦
python scripts/test_api.py
```

## ğŸ“¦ éƒ¨ç½²è€ƒæ…®

é€™å€‹çµæ§‹ä¾¿æ–¼ï¼š

-   **Docker å®¹å™¨åŒ–**: `src/` ç›®éŒ„å¯ä»¥ç›´æ¥è¤‡è£½åˆ°å®¹å™¨ä¸­
-   **åŒ…ç®¡ç†**: å¯ä»¥å°‡ `src/` æ‰“åŒ…ç‚º Python åŒ…
-   **CI/CD**: æ¸…æ™°çš„æ¸¬è©¦å’Œæ§‹å»ºæµç¨‹
